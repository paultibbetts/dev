#!/usr/bin/env bash
set -euo pipefail

GO_VERSION="1.25.5"
ARCH="arm64"
OS="darwin"

GO_PREFIX="$HOME/.local/go"
TMP_DIR="$(mktemp -d)"

trap 'rm -rf "$TMP_DIR"' EXIT

echo "Installing Go ${GO_VERSION} to ${GO_PREFIX}"

curl -fsSL \
	"https://go.dev/dl/go${GO_VERSION}.${OS}-${ARCH}.tar.gz" \
	-o "${TMP_DIR}/go.tar.gz"

rm -rf "${GO_PREFIX}"
mkdir -p "${GO_PREFIX}"

tar -xzf "${TMP_DIR}/go.tar.gz" -C "${GO_PREFIX}" --strip-components=1

echo "Go ${GO_VERSION} installed"

